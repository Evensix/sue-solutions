{"version":3,"file":"MissingDomView.jsx","sourceRoot":"","sources":["../../src/jsx-runtime/MissingDomView.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { type ComponentType } from \"react\";\nimport type { ViewProps } from \"react-native\";\n\nconst NativeView = (props) => React.createElement(\"RCTView\", props);\nconst Text = (props) => React.createElement(\"RCTText\", props);\n\nclass Try extends React.Component<\n  React.PropsWithChildren<{\n    catch: ComponentType<{ error: Error }>;\n  }>,\n  { error?: Error }\n> {\n  state = { error: undefined };\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  render() {\n    const { error } = this.state;\n    const { catch: ErrorBoundary, children } = this.props;\n    if (!error) {\n      return children;\n    }\n    return React.createElement(ErrorBoundary, { error });\n  }\n}\n\nfunction ErrorBoundary({ error }) {\n  if (error.message) {\n    // When a DOM component is rendered inside a node module that shipped without the jsx-runtime, we can only intercept the error from the renderer.\n    const invalidComponentName = error.message.match(\n      /View config getter callback for component `([^`]+)`/\n    )?.[1];\n    // Prevent wrapping the error for rendering an undefined component.\n    if (String(invalidComponentName) !== \"undefined\") {\n      return React.createElement(Text, { style: { color: \"red\" } }, [\n        `Unsupported DOM <${invalidComponentName} />`,\n      ]);\n    }\n  }\n\n  return React.createElement(Text, { style: { color: \"red\" } }, [\n    error.message,\n  ]);\n}\n\nexport function createMissingView(name: string) {\n  const stackItem = (src) => {\n    if (typeof src === \"object\" && src && \"fileName\" in src) {\n      let trace = src.fileName;\n      if (\"lineNumber\" in src) {\n        trace += \":\" + src.lineNumber;\n      }\n      if (\"columnNumber\" in src) {\n        trace += \":\" + src.columnNumber;\n      }\n      return trace;\n    }\n    return \"\";\n  };\n\n  // Add better errors and warnings in development builds.\n  const View = function View(\n    props: ViewProps & {\n      // These are injected by the React babel plugin/preset. They may go away in React 19.\n      $$source?: {\n        lineNumber: number;\n        columnNumber: number;\n        fileName: string;\n      };\n    }\n  ) {\n    React.useEffect(() => {\n      const { $$source } = props;\n      console.error(\n        `Unsupported DOM <${name} /> at: ${stackItem(\n          $$source\n        )}\\nThis will break in production.`\n      );\n    }, []);\n    const children = React.useMemo(() => {\n      const children: any[] = [];\n      React.Children.forEach(props.children, (child, index) => {\n        if (child == null) {\n          return;\n        }\n        if (typeof child === \"string\") {\n          // Wrap children with Text to prevent cryptic React errors when we already have a useful warning about the missing DOM element.\n          children.push(\n            React.createElement(Text, { key: String(index) }, [child])\n          );\n        } else {\n          children.push(child);\n        }\n      });\n      return children;\n    }, [props.children]);\n    return React.createElement(\n      NativeView,\n      props,\n      React.createElement(Try, { catch: ErrorBoundary }, children)\n    );\n  };\n\n  // Make the component stack show the name of the missing dom element.\n  View.displayName = `MISSING(${name})`;\n\n  return View;\n}\n"]}