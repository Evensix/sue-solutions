{"version":3,"file":"getUniversalComponents.jsx","sourceRoot":"","sources":["../src/getUniversalComponents.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Image, Text, View } from \"@bacons/react-views\";\nimport * as htmlElements from \"@expo/html-elements\";\nimport React from \"react\";\nimport { Platform } from \"react-native\";\n\nimport { AutoImage } from \"./AutoImage\";\nimport * as headings from \"./headings\";\nimport * as List from \"./list/List\";\n\nimport {\n  ComponentKeys,\n  getDOMComponents,\n  stripExtras,\n} from \"./getDOMComponents\";\n\n/**\n * Get base elements that are generally optimized for cross-platform usage.\n * These are less standard on the web as they use `react-native-web` wrappers,\n * but they will run on platforms that support React Native.\n */\nexport function getUniversalComponents(): Record<\n  ComponentKeys,\n  React.ComponentType<any>\n> {\n  return {\n    // Defaults to ensure web always works since this is a web-first feature.\n    // Native can be extended as needed.\n    ...getDOMComponents(),\n\n    ...Platform.select({\n      native: {\n        ul: List.UL,\n        // TODO\n        li: List.LI,\n        // TODO\n        ol: List.UL,\n      },\n    }),\n\n    h1: wrapHeader(headings.H1),\n    h2: wrapHeader(headings.H2),\n    h3: wrapHeader(headings.H3),\n    h4: wrapHeader(headings.H4),\n    h5: stripExtras(headings.H5),\n    h6: stripExtras(headings.H6),\n    a: stripExtras(htmlElements.A),\n    nav: stripExtras(htmlElements.Nav),\n    footer: stripExtras(htmlElements.Footer),\n    aside: stripExtras(htmlElements.Aside),\n    header: stripExtras(htmlElements.Header),\n    main: stripExtras(htmlElements.Main),\n    article: stripExtras(htmlElements.Article),\n    section: stripExtras(htmlElements.Section),\n\n    p: Paragraph,\n    b: stripExtras(htmlElements.B),\n    s: stripExtras(htmlElements.S),\n    i: stripExtras(htmlElements.I),\n    q: stripExtras(htmlElements.Q),\n    blockquote: stripExtras(htmlElements.BlockQuote),\n    br: stripExtras(htmlElements.BR),\n    mark: stripExtras(htmlElements.Mark),\n    code: stripExtras(htmlElements.Code),\n    // TODO\n    inlineCode: stripExtras(htmlElements.Code),\n\n    pre: stripExtras(htmlElements.Pre),\n    time: stripExtras(htmlElements.Time),\n    strong: stripExtras(htmlElements.Strong),\n    del: stripExtras(htmlElements.Del),\n    em: stripExtras(htmlElements.EM),\n\n    hr: stripExtras(htmlElements.HR),\n    div: Div,\n    span: Text,\n    img: Img,\n  };\n}\n\nfunction Paragraph({ style, children }) {\n  // NOTE(EvanBacon): Unclear why, but mdxjs is wrapping an image in a paragraph tag.\n  // This can lead to nesting a div in a p on web, which is invalid.\n  const image = React.Children.toArray(children).find((child) => {\n    return typeof child === \"object\" && \"props\" in child && child.props.src;\n  });\n  if (image) {\n    return <>{children}</>;\n  }\n\n  return <Text style={style} children={children} />;\n}\n\nfunction Div(props) {\n  return <View {...props} style={[{ flex: 1 }, props.style]} />;\n}\n\nfunction Img({ src, style }) {\n  const source = typeof src === \"string\" ? { uri: src } : src;\n  if (Platform.OS === \"web\" || !source.uri) {\n    return <Image source={source} style={style} />;\n  }\n\n  return <AutoImage style={style} source={source} />;\n}\n\nfunction wrapHeader(Element) {\n  return function Header({\n    firstChild,\n    lastChild,\n    firstOfType,\n    index,\n    prevSibling,\n    ...props\n  }) {\n    const isFirst = index === 0;\n\n    return (\n      <Element\n        {...props}\n        style={[props.style, isFirst ? { marginTop: 0 } : {}]}\n      />\n    );\n  };\n}\n"]}